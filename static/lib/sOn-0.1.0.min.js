var sOn=sOn||{};sOn.Config=sOn.Config||{};sOn.Utils=sOn.Utils||{};sOn.Utils.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};sOn.Utils.trim=function(e){return e.replace(/^\s+|\s+$/g,"")};sOn.Utils.isArray=function(e){return e&&e.constructor&&e.constructor.toString().indexOf("Array")!=-1};sOn.Utils.redirector={popup:function(e,t,n,r){window.open(e,t,n,r)},redirect:function(e){window.location.href=e},refresh:function(){window.location.reload()}};sOn.Utils.isEmptyObject=function(e){for(var t in e){if(e.hasOwnProperty(t))return false}return true};sOn.Utils.roundToTwoDecimal=function(e){return Math.round(e*100)/100};sOn.Utils.currentBrowser={name:window.navigator.userAgent,isFirefox:function(){return this.name.toLowerCase().indexOf("firefox")!=-1},isChrome:function(){return this.name.toLowerCase().indexOf("chrome")!=-1},isIE:function(){return this.name.toLowerCase().indexOf("explorer")!=-1}};window.sOn=window.sOn||{};(function(e,t){function n(e){this.id=0;this.name="";for(var t in e){this[t]=e[t]}}function r(t){this.isSOnCollection=true;this.isSonCollection=true;if(e.Utils.isArray(t)){throw Error("Collections can not be initialized with array, use { models: myArray }")}t=t||{};this.modelsById={};this.models=[];this.length=0;this.dtoType=n;if(t.dtoType){this.dtoType=t.dtoType}this.init(t.models)}n.prototype.constructor=n;n.prototype.toJSON=function(){return this};n.prototype.clone=function(){var e=new n(this);return e};r.prototype.constructor=r;r.prototype.init=function(t){if(!t)return;if(!e.Utils.isArray(t)){throw Error("Models have to be an array --> { models: myArray }")}var n=t.length;for(var r=0;r<n;r++){this.add(t[r])}};r.prototype.remove=function(e){delete this.modelsById[e];var t=this.models.length;for(var n=0;n<t;n++){if(this.models[n].id==e){this.models.splice(n,1);break}}this.length--};r.prototype.clone=function(){var e=new r;e.dtoType=this.dtoType;var t=this.length;for(var n=0;n<t;n++){e.add(this.models[n].clone())}return e};r.prototype.add=function(e){if(!e)return;if(e.id===null||e.id===t)throw Error("Items Id cant be null or undefined");if(this.containsItem(e)){throw Error("This collection already contains an item with this id:"+e.id)}if(!(e instanceof n)){e=new this.dtoType(e)}this.modelsById[e.id]=e;this.models.push(e);this.length=this.length+1};r.prototype.addArray=function(e){var t=e.length;for(var n=0;n<t;n++){if(e[n])this.add(e[n])}};r.prototype.get=function(e){return this.modelsById[e]};r.prototype.containsItem=function(e){if(!e)return false;return this.modelsById[e.id]};r.buildFromDynamicList=function(e){var t=new r({models:[]});for(var n=0,i=e.length;n<i;n++){var s=e[n];var o={id:n};for(var u=0,a=s.length;u<a;u++){o[s[u].Key]=s[u].Value;o.id=n;o.name="-"}t.add(o)}return t};e.Models=e.Models||{};e.Models.sOnDTO=n;e.Models.sOnCollection=r})(window.sOn);sOn=sOn||{};sOn.Theme=sOn.Theme||{};window.sOn=window.sOn||{};(function(e,t){function n(){function e(){try{return arguments.callee.caller.caller.toString()}catch(e){return""}}this.logException=function(e){if(window.console&&typeof console.log!="undefined"){console.log(e);var t=e.stack||e.message;if(t)console.log(t)}};this.logAlsoCaller=function(t){if(window.console&&typeof console.log!="undefined"){console.log(t+" - "+e());console.trace()}};this.log=function(e){if(window.console&&typeof console.log!="undefined"){console.log(e)}};this.info=function(e){if(window.console&&typeof console.info!="undefined")console.info(e)};this.error=function(e){if(window.console&&typeof console.error!="undefined")console.error(e)}}e.Logger=new n})(window.sOn);window.sOn=window.sOn||{};(function(e,t){function r(){var t=this;this.HOME_ALIAS_CHAR="~";this.provider=new e.Models.sOnDTO;this.urlPrefix="..";this.urlPrefixForErrorLog=null;this.urlForErrorLog="~/Controllers/clientErrors.ashx?cmd=add";this.initialize=function(){if(!window.onerror){this.catchUnhandledErrors()}};this.catchUnhandledErrors=function(){window.onerror=function(e,r,i){window._registeredErrors=arguments;var s=new n;var o=s.encode(e,r,i);var u=t._addPrefixToUrl(t.urlForErrorLog);$.post(u,{errorData:o},function(){})}}}function i(e){r.call(this);this.controller=e}var n=function(){this.encode=function(e,t,n){var r="ErrorData: "+e+" SourcePage: "+t+" Line: "+n;r=r.replace(/'/g,"");r=r.replace(/"/g,"");r=r.replace(/=/g,"EQUALS");r=r.replace(/;/g,"_");r=r.replace(/\//g,"_");r=r.replace("http"," ");r=r.replace("https"," ");return r}};r.prototype={constructor:r,markThisClientAsTheOnlyOneCapturingUnhandledErrors:function(){this.catchUnhandledErrors()},formatUrlDependingOnComponent:function(){if(e.Config.CurrentApp.targetPrefix)return this.urlPrefix+e.Config.CurrentApp.targetPrefix;return this.urlPrefix},requestData:function(e,t,n){var r=this;var i=this.provider;if(this.provider.toJSON)i=this.provider.toJSON();t.provider=JSON.stringify(i);this.onCallStart();$.ajax({type:"POST",url:r._addPrefixToUrl(e),data:t,dataType:"json",error:function(e){r._handleError(e)},success:function(e){r._handleResponse(e,n)}})},_addPrefixToUrl:function(t){if(t.charAt(0)==this.HOME_ALIAS_CHAR){var n=t.replace(this.HOME_ALIAS_CHAR,e.Config.CurrentApp.targetPrefix);n=n.replace("//","/");return n}return t},_handleResponse:function(e,t){var n=this;this.onCallEnd();if(e){if(e.error){n.onError(e.error.message,e.error.code);return false}t(e)}else{n.onError("null data")}},_formatErrorMessage:function(e){var t="Error contactando con el servidor ({1}:{0})";t=t.replace("{0}",e.statusText);t=t.replace("{1}",e.status);return t},_handleError:function(e){this.onCallEnd();this.customErrorHandling(e);this.onError(this._formatErrorMessage(e),e.status)},onError:function(e,t){},onCallStart:function(){},onCallEnd:function(){},customErrorHandling:function(e){}};i.prototype=new r;i.prototype.customErrorHandling=function(e){if(e.status==403)window.parent.sOn.redirectToLogin()};e.Network=e.Network||{};e.Network.Client=r;e.Network.jsErrorEncoder=n;e.Network.HealthConnectClient=i})(window.sOn);window.sOn=window.sOn||{};(function(e,t){function n(){this.values={}}n.prototype.parse=function(e){e=this._removeHashPart(e);var t=e.split("?")[1];if(t){var n=t.split("&");this._addAllKeyValuePairs(n)}this.firstPathElement="/"+e.split("/")[3]+"/"};n.prototype._removeHashPart=function(e){var t=e.indexOf("#");if(t>0){e=e.substring(0,t)}return e};n.prototype._addAllKeyValuePairs=function(e){for(i in e){var t=e[i].split("=");var n=t[0];var r=t[1];this.values[n]=r}};e.QueryString=n})(window.sOn);window.sOn=window.sOn||{};(function(e,t){e.Culture=e.Culture||{};e.Culture.SPAIN="es-ES";e.Culture.es_ES="es-ES";e.Culture.BRAZIL="pt-BR";e.Culture.pt_BR="pt-BR";var n=e.Culture.SPAIN;e.Culture.Translations=e.Culture.Translations||{date:{},number:{},strings:{}};e.Culture.setCurrent=function(t){e.Culture.current=t;e.Culture.date=e.Culture.Translations.date;e.Culture.number=e.Culture.Translations.number;e.Culture.strings=e.Culture.Translations.strings}})(window.sOn);window.sOn=window.sOn||{};(function(e,t){function s(){var e=new r;e.cookieManager=new n;e.parser=JSON;return e}var n=function(){function t(){var e=window.location.href;if(e.indexOf("//localhost")>0||e.indexOf("//127.0.0.1")>0)return"/"+e.split("/")[3];if(e.indexOf("//uat.")>0)return"/"+e.split("/")[3]+"/"+e.split("/")[4];if(e.indexOf("//brasil.")>0||e.indexOf("//brazil.")>0)return"/"+e.split("/")[3];return"/"}function n(){var n=t();var r=new Date;var i=60*60*1e3;r.setTime(r.getTime()+e*i);return{path:n,expires:r}}var e=20;this.setCookie=function(e,t){var r=n();$.cookie(e,t,{path:r.path,expires:r.expires})};this.getCookie=function(e){return $.cookie(e)};this.deleteCookie=function(e){$.cookie(e,null)}};var r=function(){var e="session";this.createSession=function(t,n){this.cookieManager.setCookie(e,t);this.store("user",n)};this.destroySession=function(){this.cookieManager.deleteCookie(e);this.store("user",null)};this.isLoggedIn=function(){return this.loggedUser()&&this.cookieManager.getCookie(e)};this.loggedUser=function(){return this.retrieve("user")};this.retrieve=function(e){var t=this.cookieManager.getCookie(e);if(typeof t!="undefined"&&t!="undefined"){return this.parser.parse(t)}return null};this.store=function(e,t){this.cookieManager.setCookie(e,this.parser.stringify(t))}};e.Session=e.Session||{};e.Session.CookieManager=n;e.Session.SessionManager=r;var i;e.Session.getInstance=function(){if(!i)i=s();return i};e.Session.clearInstance=function(){i=null};e.Session.temporarySessionCheckForLegacyControllers=function(t,n){if(n==403||n==-32750){alert("Tu sesíón ha caducado, por favor vuelve a iniciar sesión.");e.Session.getInstance().destroySession();window.location.reload()}};e.Factory=e.Factory||{};e.Factory.SessionManager=s})(window.sOn);window.sOn=window.sOn||{};(function(sOn,undefined){function getRandomId(){return Math.random().toString().replace(/\./g,"")}function AlertDialog(){}function isNotExecutingUnitTests(){return window.document.title.indexOf("Jasmine")<0}function Widget(e,t){this.elementId=e;this.givenPlaceholder=t;this.placeholder=null;this._nativeWidget=null;this.nativeWidget="'--- NativeWidget ya no es un campo, ahora es el metodo getNativeWidget() ---'"}function TextBoxWidget(e,t){Widget.call(this,e,t);this._lastValue=null;this.isTextBox=true}function AutocompleteTextBoxWidget(e,t){TextBoxWidget.call(this,e,t);this._lastValue=null}function FileUploaderWidget(e,t){Widget.call(this,e,t);this.fileReader=new FileReader;var n=this;this.fileListParser={get:function(){return document.getElementById(n.elementId).files}}}function TextAreaWidget(e,t){TextBoxWidget.call(this,e,t)}function MonthPickerWidget(e,t){TextBoxWidget.call(this,e,t)}function DatePickerWidget(e,t){TextBoxWidget.call(this,e,t)}function TimePickerWidget(e,t){TextBoxWidget.call(this,e,t)}function DropDownWidget(e,t){Widget.call(this,e,t)}function AutocompletionDropDown(e,t){DropDownWidget.call(this,e,t)}function TableWidget(e,t){Widget.call(this,e,t);this.models=[]}function autoGenerateColumnsBasedOnModelFields(e){var t=[];for(var n in e){if(typeof e[n]!="function"){var r={mDataProp:n,sTitle:n};if(n=="id")r.bVisible=false;t.push(r)}}return t}function parseRowId(e){var t=parseInt(e);if(!t){var n=e;t=n.substr(n.indexOf(">")+1,n.lastIndexOf("<")-n.indexOf(">")-1);t=parseInt(t)}return t}function ButtonWidget(e,t,n,r){Widget.call(this,e,t);this.caption=n||"";this.type=r;this.redirector=sOn.Utils.redirector}function MessageWidget(e,t,n,r,i){Widget.call(this,e,n);this.type=t;this.buttonId=r;this.msgAreaId=i;this.msgAreaIdWasSpecified=function(){return this.msgAreaId!=undefined};this.msgAreaIsNotInTheMarkupOrItsIdIsUnknown=function(){return!this.msgAreaIdWasSpecified()||this.msgArea.domElementDoesntExist()}}function CheckboxWidget(e,t,n){Widget.call(this,e,n);this.caption=t}function PanelWidget(e,t){Widget.call(this,e,t)}function AwaitsDisplay(e,t){PanelWidget.call(this,e,t)}function LabelWidget(e,t){Widget.call(this,e,t)}function MultiLineLabelWidget(e,t){Widget.call(this,e,t)}function buildMultilineMessage(e){var t="";for(var n=0,r=e.length;n<r;n++){t+=e[n]+"<br/>"}return t}function ListView(e,t){Widget.call(this,e,t)}function Toolbar(e,t){PanelWidget.call(this,e,t);this._buttonCount=0;this._buttons={}}function ConfirmationDialog(e,t,n,r,i){PanelWidget.call(this,e,t);this.positiveButtonId=n;this.negativeButtonId=r;this.extraInfoId=i;this.shouldOverwriteButtonLabels=true}function DummyMap(e,t){Widget.call(this,e,t);this._markers=[]}function Map(e,t){Widget.call(this,e,t);this._markers=[]}var i18n=sOn.Culture||sOn.i18n||{};i18n.strings=i18n.strings||{};i18n.strings.widgets=i18n.strings.widgets||{table:{},confirmation:{no:"No",yes:"Yes"}};i18n.strings.status=i18n.strings.status||{};sOn.shouldAutoCreateWidgets=true;AlertDialog.prototype.constructor=AlertDialog;AlertDialog.prototype.alert=function(e){alert(e)};var givenPlaceholderLooksId=function(e){return e&&typeof e=="string"};var givenPlaceholderLooksElement=function(e){return e&&typeof e=="object"};Widget.prototype={constructor:Widget,_createPlaceholderIfNecessary:function(e){if(!this.placeholder||this.placeholder.length===0){this.placeholder=$("<div>",{id:e});$("body").append(this.placeholder)}},_determinePlaceholder:function(){if(this.placeholder)return;var e=$("body").find("#"+this.elementId);if(e.length>0){this.placeholder=e.parent();return}var t=this.givenPlaceholder;if(givenPlaceholderLooksId(t))this.placeholder=$("#"+t);else if(givenPlaceholderLooksElement(t))this.placeholder=t;else t=getRandomId();this._createPlaceholderIfNecessary(t)},getNativeWidget:function(){if(this._nativeWidget)return this._nativeWidget;throw new Error("Widget is not ready. Did you forget to call initialize()?:")},registerNativeWidget:function(e){this._nativeWidget=e},isReady:function(){if(this._nativeWidget)return true;return false},domElementDoesntExist:function(){return!this.domElementExist()},domElementExist:function(){if(!this._nativeWidget){return false}return this._nativeWidget.length>0},addClass:function(e){this.getNativeWidget().addClass(e)},removeClass:function(e){this.getNativeWidget().removeClass(e)},disable:function(){this.getNativeWidget().attr("disabled","disabled")},enable:function(){this.getNativeWidget().removeAttr("disabled")},getCssClasses:function(){return this.getNativeWidget().attr("class")||""},clearDOM:function(){this.getNativeWidget().remove()},remove:function(){this.getNativeWidget().remove()},_createDomElement:function(){sOn.Logger.error("This should be overriden!")},_initializeDomElement:function(){},bindToDom:function(){this._attachNativeWidget()},_attachNativeWidget:function(){this.idHandler="#"+this.elementId;this.registerNativeWidget(this.placeholder.find(this.idHandler))},_attachNativeWidgetForTesting:function(){var e=$(this.idHandler);e.appendTo(this.placeholder);this.registerNativeWidget(e);sOn.sOnDOMwarning="Warning! widget does not exists. Creating a new one in DOM:"+this.elementId;if(isNotExecutingUnitTests())sOn.Logger.log(sOn.sOnDOMwarning)},draw:function(){if(this.elementId){this._attachNativeWidget();if(this.domElementDoesntExist()){this._attachNativeWidgetForTesting()}}if(this.domElementDoesntExist()&&sOn.shouldAutoCreateWidgets){this._createDomElement()}this._visible=this.getNativeWidget().css("display")!="none"},initialize:function(){this._determinePlaceholder();this.draw();this._initializeDomElement()},_initializeForcingAutoCreation:function(){this._determinePlaceholder();if(this.domElementDoesntExist())this._createDomElement();this.initialize()},_initializeForcingIfNeccessary:function(e){this._determinePlaceholder();this.bindToDom();if(!e||this.domElementDoesntExist()){this._initializeForcingAutoCreation();return}this.initialize()},show:function(){this.getNativeWidget().show();this._postShow.apply(this,arguments);this._visible=true},_postShow:function(){},hide:function(){this.getNativeWidget().hide();this._visible=false},focus:function(){this.getNativeWidget().focus()},html:function(){return this.getNativeWidget().html()},setHtml:function(e){this.getNativeWidget().html(e)},visible:function(){return this._visible},placeHolderForChildElements:function(){return this.getNativeWidget()},addClassByWidgetType:function(e){if(e&&e.cssClass)this.getNativeWidget().addClass(e.cssClass)}};Widget.disabledClass="disabled";TextBoxWidget.prototype=new Widget;TextBoxWidget.prototype.constructor=TextBoxWidget;TextBoxWidget.prototype._createDomElement=function(){var e=$("<input>",{type:"text",id:this.elementId});this.registerNativeWidget(e);this.placeholder.append(e)};TextBoxWidget.prototype._initializeDomElement=function(){var e=this;this.getNativeWidget().change(function(t){e._lastValue=e._valueFromChangeEvent(t);e.onChange(e._lastValue)});this.getNativeWidget().keyup(function(t){var n=t.keyCode||t.wich;var r=13;if(n==r)e.onEnter()});this.getNativeWidget().attr("name",this.elementId);this.clear();this._customDomInit()};TextBoxWidget.prototype._customDomInit=function(){};TextBoxWidget.prototype.text=function(){return this.getNativeWidget().val()};TextBoxWidget.prototype.lastValue=function(){return this._lastValue||this.getNativeWidget().val()};TextBoxWidget.prototype.setText=function(e){if(this.getNativeWidget().val()!=e){this.getNativeWidget().val(e);this._lastValue=e;this.onChange(e)}};TextBoxWidget.prototype.setMask=function(e){if($.mask){this.getNativeWidget().mask(e)}};TextBoxWidget.prototype._valueFromChangeEvent=function(e){return $(e.target).val()};TextBoxWidget.prototype.onChange=function(e){};TextBoxWidget.prototype.onEnter=function(){};TextBoxWidget.prototype.clear=function(){this.getNativeWidget().val("");if(this.getNativeWidget().placeholderEnhanced){this.getNativeWidget().placeholderEnhanced().blur()}};AutocompleteTextBoxWidget.prototype=new TextBoxWidget;AutocompleteTextBoxWidget.prototype.constructor=AutocompleteTextBoxWidget;AutocompleteTextBoxWidget.prototype.onSearch=function(){};AutocompleteTextBoxWidget.prototype.onSelect=function(e){};AutocompleteTextBoxWidget.prototype.onChange=function(e){};AutocompleteTextBoxWidget.prototype._customDomInit=function(e){var t=this;e=e||[];this.getNativeWidget().autocomplete({source:e,search:function(e,n){t.onSearch(t.text())},select:function(e,n){t.onSelect(n.item.label)},change:function(e,n){t.onChange(t.text())}})};AutocompleteTextBoxWidget.prototype.populate=function(e){this.getNativeWidget().data("autocomplete").response(e)};FileUploaderWidget.prototype=new Widget;FileUploaderWidget.prototype.constructor=FileUploaderWidget;FileUploaderWidget.prototype._createDomElement=function(){var e=$("<input>",{type:"file",id:this.elementId});this.registerNativeWidget(e);this.placeholder.append(e)};FileUploaderWidget.prototype.onFileReadSuccess=function(e){};FileUploaderWidget.prototype._initializeDomElement=function(){var e=this;this.fileReader.onload=function(t){e.fileContents=t.target.result;e.onFileReadSuccess(e.fileContents)};this.getNativeWidget().change(function(t){var n=e.fileListParser.get();if(n.length===0)return;var r=n[0];e.fileReader.readAsText(r)});this._customDomInit()};FileUploaderWidget.prototype._customDomInit=function(){};TextAreaWidget.prototype=new TextBoxWidget;TextAreaWidget.prototype.constructor=TextAreaWidget;TextAreaWidget.prototype._createDomElement=function(){var e=$("<textarea>",{id:this.elementId});this.registerNativeWidget(e);this.placeholder.append(e)};TextAreaWidget.prototype.setRows=function(e){this.getNativeWidget().attr("rows",e.toString())};var spanishCulture={monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]};MonthPickerWidget.prototype=new TextBoxWidget;MonthPickerWidget.prototype.constructor=MonthPickerWidget;MonthPickerWidget.prototype._initializeDomElement=function(){this._timePicker=this.getNativeWidget().monthpicker(spanishCulture)};DatePickerWidget.prototype=new TextBoxWidget;DatePickerWidget.prototype.constructor=DatePickerWidget;DatePickerWidget.prototype._initializeDomElement=function(){this._timePicker=this.getNativeWidget().datepicker()};DatePickerWidget.prototype.configureCulture=function(e){var t={closeText:"Cerrar",prevText:"&#x3c;Ant",nextText:"Sig&#x3e;",currentText:"Hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié;","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sá"],weekHeader:"Sm",dateFormat:"d/m/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,showOtherMonths:true,selectOtherMonths:true,yearSuffix:""};var n=e||t;$.datepicker.setDefaults(n)};TimePickerWidget.prototype=new TextBoxWidget;TimePickerWidget.prototype.constructor=TimePickerWidget;TimePickerWidget.prototype._initializeDomElement=function(){this._timePicker=this.getNativeWidget().timepicker()};DropDownWidget.prototype=new Widget;DropDownWidget.prototype.constructor=DropDownWidget;DropDownWidget.prototype.clear=function(e,t){$(this.getNativeWidget()).empty();if(e){var n=t;try{n=i18n.strings.widgets.dropDown.defaultOption}catch(r){sOn.Logger.log("warning: culture not properly configured")}this._insertDefaultValue(t||n)}};DropDownWidget.prototype.leaveOnlyADefaultOption=function(e){this.clear(true,e)};DropDownWidget.prototype.leaveOnlyAdefaultOption=function(e){this.leaveOnlyADefaultOption(e)};DropDownWidget.prototype._initializeDomElement=function(){var e=this;this.getNativeWidget().change(function(t){e._lastValue=e._valueFromChangeEvent(t);e.onChange(e._lastValue)});this.getNativeWidget().attr("name",this.elementId);this._customDomInit()};DropDownWidget.prototype._customDomInit=function(){};DropDownWidget.prototype.selectedValue=function(){return this._lastValue};DropDownWidget.prototype.selectedText=function(){return this.getNativeWidget().find("option:selected").text()};DropDownWidget.prototype._valueFromChangeEvent=function(e){return $(e.target).find("option:selected").val()};DropDownWidget.prototype._createDomElement=function(){var e=$("<select>",{id:this.elementId});this.registerNativeWidget(e);this.placeholder.append(e)};DropDownWidget.prototype.addOption=function(e,t){var n=$("<option>");n.val(t).text(e);n.appendTo($(this.getNativeWidget()))};DropDownWidget.prototype.onChange=function(e){};DropDownWidget.prototype._insertDefaultValue=function(e){var t=this.defaultOptionText||e;var n=$("<option>",{disabled:this.defaultOptionEnabled?false:true,value:"",text:t,selected:true});$(this.getNativeWidget()).prepend(n)};var dropdownWaitingText="Cargando...";DropDownWidget.prototype.refresh=function(){};DropDownWidget.prototype.unselectAll=function(){$(this.getNativeWidget()).find("option").removeAttr("selected")};DropDownWidget.prototype.setWaitingModeOn=function(){this.unselectAll();var e=$("<option>",{disabled:true,value:dropdownWaitingText,text:dropdownWaitingText,selected:true});$(this.getNativeWidget()).prepend(e);this.refresh()};DropDownWidget.prototype.setWaitingModeOff=function(){var e=$(this.getNativeWidget()).find("option[value='"+dropdownWaitingText+"']");e.remove();this.refresh()};DropDownWidget.prototype.selectedDisabledOption=function(){this.selectByValue("")};DropDownWidget.prototype.selectByValue=function(e){this.getNativeWidget().val(e);this._lastValue=e;this.onChange(e)};AutocompletionDropDown.prototype=new DropDownWidget;AutocompletionDropDown.prototype.constructor=AutocompletionDropDown;AutocompletionDropDown.prototype._customDomInit=function(){try{if($.browser.msie&&parseInt($.browser.version,10)<8){DropDownWidget.prototype.clear.call(this,true);return false}this.getNativeWidget().chosen({no_results_text:"No hay resultados para"})}catch(e){sOn.Logger.error("jQuery.chosen has thrown an exception -> "+e.stack)}};AutocompletionDropDown.prototype.selectedDisabledOption=function(){DropDownWidget.prototype.selectedDisabledOption.call(this);this.getNativeWidget().trigger("liszt:updated")};AutocompletionDropDown.prototype.clear=function(){DropDownWidget.prototype.clear.call(this,true);this.getNativeWidget().trigger("liszt:updated")};AutocompletionDropDown.prototype.selectByValue=function(e){DropDownWidget.prototype.selectByValue.call(this,e);this.getNativeWidget().trigger("liszt:updated")};AutocompletionDropDown.prototype.refresh=function(){this.getNativeWidget().trigger("liszt:updated")};TableWidget.prototype=new Widget;TableWidget.prototype.constructor=TableWidget;TableWidget.prototype.refresh=function(e){if(e){this.models=e;if(!this.columns||this.columns.length==0){if(this.models.length>0)this.setColumns(autoGenerateColumnsBasedOnModelFields(e[0],false,false));this._initializeDomElement()}}if(!this._dataTable){return}this._clearCellWidgets();this._dataTable.fnClearTable();try{this._dataTable.fnAddData(this.models)}catch(t){if(typeof t=="string"){if(t.indexOf("DataTables")!=-1){throw Error("Table not correctly initialized. Possible reasons are: "+"\n"+" 1 - You forgot to call setColumns.   "+"\n"+" 2 - You are trying to insert an object which is missing an expected field.   "+"\n"+" 3 - You forgot sDefaultContent in the column definition.   "+"\n"+" 4 - You forget mDataProp field in the column definition.   "+"\n"+" 5 - You left an ending comma in the columns definition array and IE considers it a new undefined item in the array.   "+"\n"+" - Either, sDefaultContent or mDataProp should be always defined. "+"\n"+" ==> Original error is: \n"+t)}throw t}throw t}};TableWidget.modifyIconClass="actionCell modifyRowIcon";TableWidget.removeIconClass="actionCell removeRowIcon";TableWidget.editableClass="editableCell";TableWidget.clickableClass="clickableCell";TableWidget.disabledClass="disabledCell";TableWidget.nonEditableClass="nonEditable";TableWidget.columnNameAttr="columnname";TableWidget.rowAttr="data-rowid";TableWidget.widgetActionAttr="widgetAction";TableWidget.prototype._findColumnByName=function(e){return this.getNativeWidget().find("span["+TableWidget.columnNameAttr+" ="+e+"]")};TableWidget.prototype.disableClickableColumn=function(e){var t=this._findColumnByName(e);t.removeClass(TableWidget.clickableClass);t.addClass(TableWidget.disabledClass)};TableWidget.prototype.enableClickableColumn=function(e){var t=this._findColumnByName(e);t.removeClass(TableWidget.disabledClass);t.addClass(TableWidget.clickableClass)};TableWidget.prototype.setSorting=function(e){this.sorting=e};TableWidget.prototype._clearCellWidgets=function(){if(!this.cellWidgets)return;for(var e=0,t=this.cellWidgets.length;e<t;e++)this.cellWidgets[e].clearDOM();this.cellWidgets=[]};TableWidget.prototype.setColumns=function(columns,canModifyRow,canDeleteRow){function dropdownCellHtml(e,t,n){var r=$("<div>");var i=new DropDownWidget(getRandomId(),r);i._initializeForcingAutoCreation();self.cellWidgets=self.cellWidgets||[];var s;if(typeof n.choices=="function")s=n.choices(e,t,n);else s=n.choices||[];for(var o=0,u=s.length;o<u;o++){i.addOption(s[o].name,s[o].id);if(e&&e.id==s[o].id)i.selectByValue(s[o].id)}i.modelId=t.aData.id;i.columnInfo=n;i.cellInfo=t;self.cellWidgets.push(i);return r.html()}function defaultCellHtml(e,t,n,r){var i="";if(e!=null&&e!=undefined&&typeof e!="function"){i=e.toString();i=i.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var s;if(r==TableWidget.editableClass){var o=10;for(var u=0,a=self.columns.length;u<a;u++){if(self.columns[u].mDataProp==n){o=self.columns[u].charsSize;break}}s=$("<input>",{type:"text","class":TableWidget.editableClass,value:i,size:o||10});s.val(i)}else{s=$("<span>");s.addClass(r);s.text(i)}var f=$("<div>");s.attr(TableWidget.columnNameAttr,n);s.attr(TableWidget.rowAttr,t.aData.id);f.append(s);return f.html()}this.columns=columns;var self=this;if(!columns)return;if(canModifyRow){this.columns.push({sClass:TableWidget.modifyIconClass,sTitle:self.modifyColumnTitle||i18n.strings.widgets.table.modify,sDefaultContent:'<a data-{0}="modify" href="#">X</a>'.replace("{0}",TableWidget.widgetActionAttr)})}if(canDeleteRow){this.columns.push({sClass:TableWidget.removeIconClass,sTitle:self.removeColumnTitle||i18n.strings.widgets.table.remove,sDefaultContent:'<a data-{0}="remove" href="#">X</a>'.replace("{0}",TableWidget.widgetActionAttr)})}this.dropDownColumn=function(e){for(var t=0,n=self.columns.length;t<n;t++){var r=self.columns[t];if(r.isDropDown||r.isDropdown)if(e.mDataProp&&e.mDataProp==r.mDataProp||e.sDefaultContent&&e.sDefaultContent==r.sDefaultContent)return r}return false};this.drawCell=function(cell,cssClass){var columnName=this.mDataProp;var cellContents=this.sDefaultContent;var isClickableColumn=false;if(TableWidget.prototype.isNotModelFieldColumn(columnName)){if(TableWidget.prototype.isModifyORremoveColumn(this)){return}isClickableColumn=true;columnName=this.sTitle}if(!isClickableColumn){if(columnName.indexOf(".")>0){eval("cellContents = cell.aData."+columnName+" ;")}else{cellContents=cell.aData[columnName]}}var dropdownCol=self.dropDownColumn(this);if(dropdownCol){return dropdownCellHtml(cellContents,cell,dropdownCol)}else{return defaultCellHtml(cellContents,cell,columnName,cssClass)}};this.drawEditableCell=function(e){return self.drawCell.call(this,e,TableWidget.editableClass)};this.drawClickableCell=function(e){return self.drawCell.call(this,e,TableWidget.clickableClass)};this.drawInvisibleIdAsAnAttribute=function(e){return self.drawCell.call(this,e,TableWidget.nonEditableClass)};for(var i=0,len=columns.length;i<len;i++){var column=columns[i];if(column.bEditable){column.fnRender=self.drawEditableCell}else if(column.bClickable){column.fnRender=self.drawClickableCell}else if(column.bVisible!==false){column.fnRender=self.drawInvisibleIdAsAnAttribute}}};TableWidget.prototype.defineRowRenderDetails=function(e){this.renderDetailsCalculator=e};TableWidget.prototype.clearTable=function(){if(this.isReady())this.getNativeWidget().empty()};TableWidget.prototype.clearDOM=function(){Widget.prototype.clearDOM.call(this);$(".dataTables_wrapper").remove()};TableWidget.prototype._createDomElement=function(){var e=$("<table>",{id:this.elementId});this.registerNativeWidget(e);this.placeholder.append(e)};TableWidget.prototype.setNoResultsMessage=function(e){if(!this._dataTable){throw new Error("Widget must be initialized first")}var t=this._dataTable.fnSettings();t.oLanguage.sZeroRecords=e;t.oLanguage.sEmptyTable=e;this._dataTable.fnDraw(true)};TableWidget.prototype.goToFirstPage=function(){if(this._dataTable)this._dataTable.fnPageChange("first")};TableWidget.prototype.enablePagination=function(){this.paginationEnabled=true};TableWidget.prototype.disablePagination=function(){this.paginationEnabled=false};TableWidget.prototype._enableFiltering=function(){var e=this._dataTable.fnSettings();this.filterEnabled=true;e.oFeatures.bFilter=true};TableWidget.prototype.disableFiltering=function(){var e=this._dataTable.fnSettings();this.filterEnabled=false;e.oFeatures.bFilter=false;this.refresh()};TableWidget.prototype.filter=function(e,t){if(!this.filterEnabled)this._enableFiltering();this._dataTable.fnFilter(e,t,true,false)};TableWidget.prototype._initializeDomElement=function(){if(!this.columns)return;var e=this;this.getNativeWidget().addClass("results");this._dataTable=this.getNativeWidget().dataTable({aaData:e.models,bDestroy:true,bSort:e.areColumnsSortable||false,aaSorting:e.sorting,aoColumns:e.columns,bAutoWidth:false,bLengthChange:false,iDisplayLength:10,bPaginate:e.paginationEnabled||false,fnDrawCallback:function(){e.bindGridEvents()},fnRowCallback:function(t,n,r,i){if(e.renderDetailsCalculator){var s=$("td:eq(0)",t);var o=e._getModelIdFromColumn(s);var u=e.renderDetailsCalculator.calculateBy(o);var a=u.length;for(var f=0;f<a;f++){var l=e.findVisibleColumnIndexByTitle(u[f].columnTitle);var c="td:eq("+l+")";$(c,t).addClass(u[f].cssClass)}}return t},oLanguage:{sLengthMenu:"Mostrar _MENU_ filas por página",sZeroRecords:"No hay datos para mostrar.",sInfo:i18n.strings.widgets.table.paged,sInfoEmpty:"",sInfoFiltered:"(filtrado de _MAX_ resultados en total)",sSearch:"Filtrar",sProcessing:"<span class='spinner'>Procesando...</span>"},bFilter:e.filterEnabled||false})};TableWidget.prototype.bindGridEvents=function(){function t(t){t.onChange=function(n){var r=parseRowId(t.modelId);if(t.columnInfo.mDataProp)e.onItemChanged(r,t.columnInfo.mDataProp,n);if(t.columnInfo.sDefaultContent)e.onSelectableOptionClicked(r,n)}}function r(){if(!e.cellWidgets)return;for(var r=0,i=e.cellWidgets.length;r<i;r++){var s=e.cellWidgets[r];s.placeholder=e.placeholder;if(n(s)){s.initialize();t(s)}}}var e=this;var n=function(t){var n=e._dataTable.fnSettings();return $.inArray(t.cellInfo.iDataRow,n.aiDisplay)>-1};r();var i="#"+e.elementId+" td";$(i).delegate("span."+TableWidget.editableClass.replace(/ /g,"."),"click",function(t){e.onCellEditing(jQuery(t.target));t.preventDefault();t.stopPropagation()});$(i).delegate("span."+TableWidget.clickableClass.replace(/ /g,"."),"click",function(t){e.onClicked(jQuery(t.target));t.preventDefault();t.stopPropagation()});var s="#"+e.elementId;$(s).delegate("td."+TableWidget.removeIconClass.replace(/ /g,".")+" a","click",function(t){e.onDeleteRow(jQuery(t.target));t.preventDefault();t.stopPropagation()});$(s).delegate("td."+TableWidget.modifyIconClass.replace(/ /g,".")+" a","click",function(t){e.onModifyRow(jQuery(t.target));t.preventDefault();t.stopPropagation()});$(i).delegate("input."+TableWidget.editableClass.replace(/ /g,"."),"change",function(t){e.onCellChanged(jQuery(t.target));t.preventDefault();t.stopPropagation()})};TableWidget.prototype.onDeleteRow=function(e){var t=this._getModelId(e);if(t!=null){this.onItemRemoved(t)}};TableWidget.prototype.onClicked=function(e){var t=this._getModelId(e);if(t!=null){this.onColumnClicked(t,e.attr(TableWidget.columnNameAttr))}};TableWidget.prototype._getModelIdFromColumn=function(e){return e.find("span").attr(TableWidget.rowAttr)};TableWidget.prototype._getModelIdFromRow=function(e){return e.find("td span").attr(TableWidget.rowAttr)};TableWidget.prototype._getModelId=function(e){var t=e.parents("tr");var n=$("tr").index(t);if(n>=0){return this._getModelIdFromRow(t)}return null};TableWidget.prototype.onModifyRow=function(e){var t=this._getModelId(e);if(t!=null){this.onItemModification(t)}};TableWidget.prototype.onCellEditing=function(e){var t=e.parent();if(t.children().length>1)return;var n=$("<input>",{type:"text","class":TableWidget.editableClass});e.hide();n.attr(TableWidget.columnNameAttr,e.attr(TableWidget.columnNameAttr));n.attr(TableWidget.rowAttr,e.attr(TableWidget.rowAttr));n.val(e.text());n.appendTo(t);n.select().focus()};TableWidget.prototype.onCellChanged=function(e){var t=e.attr(TableWidget.columnNameAttr);var n=parseRowId(e.attr(TableWidget.rowAttr));this.onItemChanged(n,t,e.val())};TableWidget.prototype.isNotModelFieldColumn=function(e){return typeof e=="number"};TableWidget.prototype.isModifyORremoveColumn=function(e){if(!e.sDefaultContent){throw new Error("Column definition must contain sDefaultContent")}return e.sDefaultContent.indexOf(TableWidget.widgetActionAttr)>0};TableWidget.prototype._rowLinkByPosition=function(e){var t=this.getNativeWidget();if(t.length<1)throw new Error("table does not contain anything");return $(t.eq(0).find("tbody tr td a")[e])};TableWidget.prototype._getDeletionLink=function(){return this._rowLinkByPosition(1)};TableWidget.prototype._getModificationLink=function(){return this._rowLinkByPosition(0)};TableWidget.prototype._getEditableCell=function(){var e=this.getNativeWidget().find("span.editableCell");e.click();var t=this.getNativeWidget().find("input.editableCell");return t};TableWidget.prototype._changeCellValue=function(e){var t=this._getEditableCell();t.val(e);t.change()};TableWidget.prototype.hideColumn=function(e){this._dataTable.fnSetColumnVis(e,false)};TableWidget.prototype.findVisibleColumnIndexByTitle=function(e){var t=this.columns.length;var n=-1;for(var r=0;r<t;r++){var i=this.columns[r];if(i.bVisible===false)continue;n+=1;if(i.sTitle&&i.sTitle.toUpperCase()==e.toString().toUpperCase())return n}return-1};TableWidget.prototype.findColumnIndexByFieldName=function(e){var t=this.columns.length;for(var n=0;n<t;n++){var r=this.columns[n].mDataProp;if(r)if(r.toUpperCase()==e.toString().toUpperCase()){return n}}return-1};TableWidget.prototype.findColumnIndexByTitle=function(e){var t=this.columns.length;for(var n=0;n<t;n++){var r=this.columns[n].sTitle;if(r)if(r.toUpperCase()==e.toString().toUpperCase()){return n}}return-1};TableWidget.prototype.hideColumnByTitle=function(e){var t=this.findColumnIndexByTitle(e);if(t!=-1){this._dataTable.fnSetColumnVis(t,false);this.columns[t].bVisible=false}};TableWidget.prototype.showColumnByTitle=function(e){var t=this.findColumnIndexByTitle(e);if(t!=-1){this._dataTable.fnSetColumnVis(t,true);this.columns[t].bVisible=true}};TableWidget.prototype.onItemChanged=function(){};TableWidget.prototype.onItemRemoved=function(){};TableWidget.prototype.onColumnClicked=function(){};TableWidget.prototype.onSelectableOptionClicked=function(){};TableWidget.prototype.onItemModification=function(){};ButtonWidget.types={add:{cssClass:"add"},save:{cssClass:"guardar"},accept:{cssClass:"aceptar"},validate:{cssClass:"aceptar"},print:{cssClass:"imprimir"},close:{cssClass:"close"},none:{cssClass:""},cancel:{cssClass:"cancelar"}};ButtonWidget.prototype=new Widget;ButtonWidget.prototype.constructor=ButtonWidget;ButtonWidget.prototype.setWaitingModeOn=function(){if(this.isReady()){this.disable();this.getNativeWidget().addClass("waiting")}};ButtonWidget.prototype.setWaitingModeOff=function(){if(this.isReady()){this.enable();this.getNativeWidget().removeClass("waiting")}};ButtonWidget.prototype._createDomElement=function(){var e=$("<a>",{id:this.elementId,href:"#"});e.appendTo(this.placeholder);this.registerNativeWidget(e)};ButtonWidget.prototype._hasAnAnchorWithName=function(e){return e&&e.length>1&&e.charAt(e.length-1)!="#"};ButtonWidget.prototype._initializeDomElement=function(){var e=this;var t=this.getNativeWidget().attr("href");this.getNativeWidget().click(function(n){if(e._hasAnAnchorWithName(t)){e.redirector.redirect(t)}else{e.getNativeWidget().attr("href","#");if(e.getNativeWidget().hasClass("disabled")){n.preventDefault();return false}e.onClick();n.preventDefault()}});if(this.caption){this.getNativeWidget().text(this.caption)}this.addClassByWidgetType(this.type)};ButtonWidget.prototype.doClick=function(){this.getNativeWidget().click()};ButtonWidget.prototype.disable=function(){this.getNativeWidget().addClass("disabled")};ButtonWidget.prototype.enable=function(){this.getNativeWidget().removeClass("disabled")};ButtonWidget.prototype.onClick=function(e){};ButtonWidget.prototype.setCaption=function(e){this.caption=e;this.getNativeWidget().text(this.caption)};ButtonWidget.prototype.getCaption=function(){return this.getNativeWidget().text()};MessageWidget.prototype=new Widget;MessageWidget.prototype.constructor=MessageWidget;MessageWidget.prototype._useInnerPanelAsMsgArea=function(){var e=this.msgAreaId||getRandomId();this.msgArea=new PanelWidget(e,this.getNativeWidget());this.msgArea._initializeForcingIfNeccessary(this.msgAreaId)};MessageWidget.prototype._initMsgArea=function(){if(!this.buttonId&&!this.msgAreaId)this.msgArea=this;else this._useInnerPanelAsMsgArea()};MessageWidget.prototype._initInnerButton=function(){if(this.buttonId){var e=new ButtonWidget(this.buttonId,this.getNativeWidget(),"X",ButtonWidget.types.close);e.initialize();var t=this;e.onClick=function(){t.hide();t.onClose()};this.closeButton=e}};MessageWidget.prototype.innerButton=function(){return this.closeButton};MessageWidget.prototype.onShow=function(){};MessageWidget.prototype.onClose=function(){};MessageWidget.prototype._createDomElement=function(){var e=$("<div>",{id:this.elementId});e.appendTo(this.placeholder);this.registerNativeWidget(e)};MessageWidget.types={error:{cssClass:"message error"},success:{cssClass:"message success"}};MessageWidget.prototype._postShow=function(e){if(e){this.msgArea.getNativeWidget().text(e)}this.onShow()};MessageWidget.prototype.alert=function(e){this.show(e)};MessageWidget.prototype._initializeDomElement=function(){this.addClassByWidgetType(this.type);this.getNativeWidget().hide();this._initInnerButton();this._initMsgArea()};CheckboxWidget.prototype=new Widget;CheckboxWidget.prototype.constructor=CheckboxWidget;CheckboxWidget.prototype._createDomElement=function(){var e=$("<input>",{type:"checkbox",id:this.elementId});e.appendTo(this.placeholder);this.registerNativeWidget(e)};CheckboxWidget.prototype.onChange=function(){};CheckboxWidget.prototype._initializeDomElement=function(){var e=this;this.getNativeWidget().attr("checked",this.checked);this.setChecked(this.checked);this.getNativeWidget().change(function(t){if(e.getNativeWidget().hasClass("disabled")){t.preventDefault();return false}e.onChange()})};CheckboxWidget.prototype.isChecked=function(){var e=this.getNativeWidget().attr("checked");if(this.getNativeWidget().prop)e=this.getNativeWidget().prop("checked")||this.getNativeWidget().attr("checked");return e===true};CheckboxWidget.prototype.setChecked=function(e){var t=this.isChecked();var n=this.getNativeWidget();if(e){if(n.prop)n.prop("checked",true);n.attr("checked",true)}else{n.removeAttr("checked");if(n.prop)n.prop("checked",null)}if(t!=e){this.onChange()}};PanelWidget.prototype=new Widget;PanelWidget.prototype.constructor=PanelWidget;PanelWidget.prototype._createDomElement=function(){var e=$("<div>",{id:this.elementId});e.appendTo(this.placeholder);this.registerNativeWidget(e)};PanelWidget.prototype.setText=function(e){this.getNativeWidget().text(e)};PanelWidget.prototype.disable=function(){var e=this.getNativeWidget();e.find("*").addClass(Widget.disabledClass);e.find("input").attr("disabled",true);e.find("select").attr("disabled",true);e.find("textarea").attr("disabled",true)};PanelWidget.prototype.enable=function(){var e=this.getNativeWidget();e.find("*").removeClass(Widget.disabledClass);e.find("*").removeAttr("disabled")};AwaitsDisplay.prototype=new PanelWidget;AwaitsDisplay.prototype.constructor=AwaitsDisplay;AwaitsDisplay.prototype._createDomElement=function(){this.registerNativeWidget($('<div class="dummy">'))};AwaitsDisplay.prototype.html=function(e){if(!this.isReady())this.initialize();return this.getNativeWidget().html(e)};AwaitsDisplay.prototype.populateInCaseOfEmpty=function(){var e=this.getNativeWidget();var t=e.html();if(t.length==0){e.text("");var n="<h2>"+i18n.strings.status.loading+"...</h2>";e.html(n)}};AwaitsDisplay.prototype.attachWorker=function(e){var t=this;e.onCallStart=function(){t.show()};e.onCallEnd=function(){t.hide()}};AwaitsDisplay.prototype.show=function(){if(!this.isReady())this.initialize();this.getNativeWidget().show();this.populateInCaseOfEmpty()};LabelWidget.prototype=new Widget;LabelWidget.prototype.constructor=LabelWidget;LabelWidget.prototype._createDomElement=function(){var e=$("<span>",{id:this.elementId});this.registerNativeWidget(e);this.placeholder.append(e)};LabelWidget.prototype.setCaption=function(e){this.getNativeWidget().text(e)};LabelWidget.prototype.setText=function(e){this.setCaption(e)};LabelWidget.prototype.caption=function(){return this.getNativeWidget().text()};LabelWidget.prototype._postShow=function(e){if(e){this.setText(e)}this.onShow()};LabelWidget.prototype.onShow=function(){};MultiLineLabelWidget.prototype=new PanelWidget;MultiLineLabelWidget.prototype.constructor=MultiLineLabelWidget;MultiLineLabelWidget.prototype.setMultilineMessage=function(e){var t=buildMultilineMessage(e);this.getNativeWidget().html(t)};MultiLineLabelWidget.prototype.appendLines=function(e){var t=buildMultilineMessage(e);this.getNativeWidget().append(t)};ListView.prototype=new Widget;ListView.prototype.constructor=ListView;ListView.prototype._createDomElement=function(){var e=$("<ul>",{type:"text",id:this.elementId});this.registerNativeWidget(e);this.placeholder.append(e)};ListView.prototype.refresh=function(e){var t=e.length;var n="";for(var r=0;r<t;r++){n+="<li>"+e[r]+"</li>"}this.getNativeWidget().html(n)};Toolbar.prototype=new PanelWidget;Toolbar.prototype.constructor=Toolbar;Toolbar.prototype.onClick=function(){};Toolbar.prototype.buttonCount=function(){return this._buttonCount};Toolbar.prototype.showButtons=function(e){if(e){this._hideAllButtons();for(var t=0;t<e.length;t++){this._buttons[e[t]].show()}return false}this._showAllButtons()};Toolbar.prototype._hideAllButtons=function(){for(var e in this._buttons){this._buttons[e].hide()}};Toolbar.prototype._showAllButtons=function(){for(var e in this._buttons){this._buttons[e].show()}};Toolbar.prototype.add=function(e,t,n){if(!this._buttons[e]){this._buttonCount++;t=t||"";this._buttons[e]=this._createButton(e,n,t)}};Toolbar.prototype._createButton=function(e,t,n){var r=this;var i=new ButtonWidget(n,this.getNativeWidget(),t,ButtonWidget.types.none);i.initialize();i.hide();i.onClick=function(){r.onClick(e)};return i};Toolbar.prototype.get=function(){return{buttons:this._buttons}};Toolbar.prototype.select=function(e){this._unSelectAll();this._buttons[e].getNativeWidget().parent("li").addClass("selected")};Toolbar.prototype._unSelectAll=function(){for(var e in this._buttons){this._unSelect(e)}};Toolbar.prototype._unSelect=function(e){this._buttons[e].getNativeWidget().parent("li").removeClass("selected")};Toolbar.prototype.getVisibleButtons=function(){var e=[];for(var t in this._buttons){if(this._buttons[t].visible()){e.push(t)}}return e};ConfirmationDialog.prototype=new PanelWidget;ConfirmationDialog.constructor=ConfirmationDialog;ConfirmationDialog.prototype.onConfirmationDone=function(e){};ConfirmationDialog.prototype.doNotOverwriteButtonLabels=function(){this.shouldOverwriteButtonLabels=false};ConfirmationDialog.prototype._postShow=function(e){if(this.extraInfoWidget)this.extraInfoWidget.setHtml(e)};ConfirmationDialog.prototype._createPositiveButton=function(){var e=i18n.strings.widgets.confirmation.yes||"Si";if(!this.shouldOverwriteButtonLabels)e="";var t=new ButtonWidget(this.positiveButtonId,this.getNativeWidget(),e,ButtonWidget.types.accept);t._initializeForcingIfNeccessary(this.positiveButtonId);return t};ConfirmationDialog.prototype._createNegativeButton=function(){var e=i18n.strings.widgets.confirmation.no||"No";if(!this.shouldOverwriteButtonLabels)e="";var t=new ButtonWidget(this.negativeButtonId,this.getNativeWidget(),e,ButtonWidget.types.cancel,this.getNativeWidget());t._initializeForcingIfNeccessary(this.negativeButtonId);return t};ConfirmationDialog.prototype._initializeDomElement=function(){function t(t){e.wasPositiveAnswer=t;e.onConfirmationDone(t);e.hide()}var e=this;this.positiveButton=this._createPositiveButton();this.positiveButton.onClick=function(){t(true)};this.negativeButton=this._createNegativeButton();this.negativeButton.onClick=function(){t(false)};if(this.extraInfoId){this.extraInfoWidget=new LabelWidget(this.extraInfoId,this.getNativeWidget());this.extraInfoWidget.initialize()}};DummyMap.prototype=new Widget;DummyMap.prototype.addMarker=function(e){};DummyMap.prototype.zoomToMarkerExtents=function(){};DummyMap.prototype.clear=function(){};Map.prototype=new Widget;Map.prototype._createDomElement=function(){var e=$("<div>",{id:this.elementId});e.css("width","100%");e.css("height","100%");this.registerNativeWidget(e);this.placeholder.append(e)};Map.prototype._initializeDomElement=function(){var e=this._nativeWidget.get(0);var t=new google.maps.LatLng(40.486,-3.76);var n={zoom:6,maxZoom:14,center:t,zoomControl:false,scaleControl:false,panControl:false,scrollwheel:false,streetViewControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP};this._gmap=new google.maps.Map(e,n)};Map.prototype.addMarker=function(e){var t=new google.maps.LatLng(e.latitude,e.longitude);var e=new google.maps.Marker({map:this._gmap,icon:this._markerImage(e.letter),shadow:this._markerShadow(),position:t,title:e.name});this._markers.push(e)};Map.prototype._markerImage=function(e,t){t=t||"009EE0";e=e||"%E2%80%A2";return new google.maps.MarkerImage("https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld="+e+"|"+t,new google.maps.Size(21,34),new google.maps.Point(0,0),new google.maps.Point(10,34))};Map.prototype._markerShadow=function(){return new google.maps.MarkerImage("https://chart.googleapis.com/chart?chst=d_map_pin_shadow",new google.maps.Size(40,37),new google.maps.Point(0,0),new google.maps.Point(12,35))};Map.prototype._postShow=function(){google.maps.event.trigger(this._gmap,"resize");this.zoomToMarkerExtents()};Map.prototype.zoomToMarkerExtents=function(){var e=new google.maps.LatLngBounds;var t=this._markers.length;for(var n=0;n<t;n++){e.extend(this._markers[n].position)}this._gmap.fitBounds(e)};Map.prototype.clear=function(){var e=this._markers.length;for(var t=0;t<e;t++){this._markers[t].setMap(null)}this._markers=[]};sOn.Widgets=sOn.Widgets||{};sOn.Widgets.getRandomId=getRandomId;sOn.Widgets.Widget=Widget;sOn.Widgets.Message=MessageWidget;sOn.Widgets.Button=ButtonWidget;sOn.Widgets.Table=TableWidget;sOn.Widgets.DropDown=DropDownWidget;sOn.Widgets.AutocompletionDropDown=AutocompletionDropDown;sOn.Widgets.TextBox=TextBoxWidget;sOn.Widgets.FileUploader=FileUploaderWidget;sOn.Widgets.AutocompleteTextBox=AutocompleteTextBoxWidget;sOn.Widgets.Checkbox=CheckboxWidget;sOn.Widgets.Panel=PanelWidget;sOn.Widgets.Label=LabelWidget;sOn.Widgets.MultiLineLabel=MultiLineLabelWidget;sOn.Widgets.TimePicker=TimePickerWidget;sOn.Widgets.DatePicker=DatePickerWidget;sOn.Widgets.TextArea=TextAreaWidget;sOn.Widgets.AlertDialog=AlertDialog;sOn.Widgets.ListView=ListView;sOn.Widgets.Toolbar=Toolbar;sOn.Widgets.AwaitsDisplay=AwaitsDisplay;sOn.Widgets.ConfirmationDialog=ConfirmationDialog;sOn.Widgets.Map=Map;sOn.Widgets.DummyMap=DummyMap;sOn.Widgets.MonthPicker=MonthPickerWidget})(window.sOn);window.sOn=window.sOn||{};(function(sOn,undefined){function DataBinder(){this.widget=null}function SingleChoiceSelectable(){DataBinder.call(this);this.collection=new sOn.Models.sOnCollection}function TableDataBinder(){DataBinder.call(this);this.clearCollection();this.dtoType=sOn.Models.sOnDTO}DataBinder.prototype.bindUI=function(e,t){throw Error("This abstract method should be implemented in child class")};DataBinder.prototype.attachWidget=function(e){throw Error("This abstract method should be implemented in child class")};DataBinder.prototype.innerWidget=function(){return this.widget};DataBinder.prototype.initialize=function(){this.widget.initialize()};DataBinder.prototype.rawUI=function(){return this.widget.html()};DataBinder.prototype.html=function(){return this.widget.html()};DataBinder.prototype.hide=function(){return this.widget.hide()};DataBinder.prototype.show=function(){return this.widget.show()};DataBinder.override=function(e,t){function n(){e.apply(this,arguments);if(this._constructor_)this._constructor_.apply(this,arguments)}n.prototype=new e;n.prototype.constructor=n;for(var r in t){n.prototype[r]=t[r]}return n};SingleChoiceSelectable.prototype=new DataBinder;SingleChoiceSelectable.prototype.constructor=SingleChoiceSelectable;SingleChoiceSelectable.prototype.getBusinessCollection=function(){return this.collection};SingleChoiceSelectable.prototype.attachWidget=function(e){var t=this;this.widget=e;this.widget.onChange=function(e){t.selectionChanged.call(t,e)}};SingleChoiceSelectable.prototype.bindUI=function(e,t){this.attachWidget(new sOn.Widgets.AutocompletionDropDown(e,t));this.initialize()};SingleChoiceSelectable.prototype.disableWhileWaitToReload=function(){this.widget.clear();this.disableWhileWait()};SingleChoiceSelectable.prototype.disableWhileWait=function(){this.widget.disable();this.widget.setWaitingModeOn()};SingleChoiceSelectable.prototype.setWaitingModeOn=function(){this.disableWhileWait()};SingleChoiceSelectable.prototype.setWaitingModeOff=function(){this.enable()};SingleChoiceSelectable.prototype.enable=function(){this.widget.setWaitingModeOff();this.widget.enable()};SingleChoiceSelectable.prototype.selectionChanged=function(e){var t=this.collection.get(e);this.selectedItem=t;this.onObjectChanged(t);this.onChange(t)};SingleChoiceSelectable.prototype.onObjectChanged=function(){};SingleChoiceSelectable.prototype.onChange=function(){};SingleChoiceSelectable.prototype.addCollection=function(e){if(!e.models){throw TypeError("Only collections are allowed")}var t=this;t.clear(true);this.collection=e;for(var n=0;n<e.length;n++){if(e.models[n].name&&e.models[n].id){t.widget.addOption(e.models[n].name,e.models[n].id)}}t.widget.refresh()};SingleChoiceSelectable.prototype.addItem=function(e){this.collection.add(e);this.widget.addOption(e.name,e.id);this.widget.refresh()};SingleChoiceSelectable.prototype.add=function(e){this.addItem(e)};SingleChoiceSelectable.prototype.count=function(){return this.collection.length};SingleChoiceSelectable.prototype.clear=function(e){this.collection=new sOn.Models.sOnCollection;this.widget.clear(e)};SingleChoiceSelectable.prototype.empty=function(){this.widget.clear(false)};SingleChoiceSelectable.prototype.redraw=function(){this.widget.refresh()};SingleChoiceSelectable.prototype.deselectAnyOption=function(){this.widget.selectedDisabledOption()};SingleChoiceSelectable.prototype.selectItem=function(e){this.widget.selectByValue(e.id)};TableDataBinder.prototype=new DataBinder;TableDataBinder.prototype.constructor=TableDataBinder;TableDataBinder.prototype.clearCollection=function(){this.dtoCollection=new sOn.Models.sOnCollection({dtoType:this.dtoType})};TableDataBinder.prototype.clear=function(){this.clearCollection();this.refresh();this.widget.goToFirstPage()};TableDataBinder.prototype.getBusinessCollection=function(){return this.dtoCollection};TableDataBinder.prototype.filter=function(e,t){this.widget.filter(e,this.widget.findColumnIndexByFieldName(t))};TableDataBinder.prototype.add=function(e){if(!e){return}var t=false;$.each(this.dtoCollection.models,function(){if(e.id==this.id){t=true;sOn.Logger.log("Warning! two items with same id cant be added");return}});if(!t){this._add(e)}};TableDataBinder.prototype._add=function(e){this.dtoCollection.add(e);this.widget.refresh(this.dtoCollection.models)};TableDataBinder.prototype.addCollection=function(e){this.dtoCollection=e;this.widget.refresh(this.dtoCollection.models)};TableDataBinder.prototype.bindUI=function(e,t){this.attachWidget(new sOn.Widgets.Table(e,t));this.initialize()};TableDataBinder.prototype.attachWidget=function(e){this.widget=e;this._defineColumns();var t=this;this.widget.onItemRemoved=function(){t.itemRemovedFromCollection.apply(t,arguments)};this.widget.onItemChanged=function(){t.collectionItemChanged.apply(t,arguments)};this.widget.onItemModification=function(){t.itemModification.apply(t,arguments)};this.widget.onColumnClicked=function(){t.columnClicked.apply(t,arguments)};this.widget.onSelectableOptionClicked=function(){t._selectionChangedForItemField.apply(t,arguments)}};TableDataBinder.prototype._defineColumns=function(){this.widget.setColumns(null,false,false)};TableDataBinder.prototype.refresh=function(){this.widget.refresh(this.dtoCollection.models)};TableDataBinder.prototype.collectionItemChanged=function(id,attrName,attrValue){var item=this.dtoCollection.get(id);var oldValue="";if(item){var fieldName="item."+attrName;oldValue=eval(fieldName);eval(fieldName+" = attrValue")}this.onItemChanged(item,attrName,oldValue,attrValue)};TableDataBinder.prototype.itemModification=function(e){this.onItemModification(this.dtoCollection.get(e))};TableDataBinder.prototype.columnClicked=function(e,t){this.onColumnClicked(this.dtoCollection.get(e),t)};TableDataBinder.prototype._selectionChangedForItemField=function(e,t){this.onSelectionChangedForItemField(this.dtoCollection.get(e),t)};TableDataBinder.prototype.onItemModification=function(){};TableDataBinder.prototype.onItemRemoval=function(){};TableDataBinder.prototype.onItemChanged=function(){};TableDataBinder.prototype.onSelectionChangedForItemField=function(){};TableDataBinder.prototype.itemRemovedFromCollection=function(e){var t=this.dtoCollection.get(e);this.dtoCollection.remove(e);this.widget.refresh(this.dtoCollection.models);this.onItemRemoval(t)};TableDataBinder.prototype.disableClickableColumn=function(e){this.widget.disableClickableColumn(e)};TableDataBinder.prototype.enableClickableColumn=function(e){this.widget.enableClickableColumn(e)};TableDataBinder.override=function(e){return DataBinder.override(TableDataBinder,e)};var PairsTableBinder=TableDataBinder.override({_constructor_:function(e){if(e)this.option=e.option},_defineColumns:function(){this.widget.setColumns([{mDataProp:"id",sTitle:"Id"},{mDataProp:"name",sTitle:"Name",bEditable:true}],true,true)}});var ClickablePairsTableBinder=TableDataBinder.override({_defineColumns:function(){this.widget.setColumns([{mDataProp:"id",sTitle:"Id",bClickable:true},{mDataProp:"name",sTitle:"Name",bEditable:true}],true,true)}});var BinderWithDates=TableDataBinder.override({_defineColumns:function(){this.widget.setColumns([{mDataProp:"id",sTitle:"Id"},{mDataProp:"thedate",sTitle:"Date"}],true,true)}});sOn.DataBinders=sOn.DataBinders||{};sOn.DataBinders.SingleChoiceSelectable=SingleChoiceSelectable;sOn.DataBinders.TableDataBinder=TableDataBinder;sOn.DataBinders.PairsTable=PairsTableBinder;sOn.DataBinders.ClickablePairsTable=ClickablePairsTableBinder;sOn.DataBinders.BinderWithDates=BinderWithDates})(window.sOn);window.sOn=window.sOn||{};(function(e,t){function n(){e.Network.Client.call(this)}function r(e){this.data=e}function i(){function n(t){var n;try{n=parseInt(t)}catch(r){n=0}if(isNaN(n)){n=0}return new e.Models.sOnDTO({id:n})}function r(e){var n=e;if(!e)n=t._widget.text();var r=t.retrievedObjects[n];if(!r)return t.buildDtoWhenUserInputDoesntMatchAnyOfTheSuggestedItems(n);if(!r.id)r.id=0;return r}function i(e){var n=r(e);t.onSelectionChanged(n);t.onChanged(n)}function s(e){t.keys=[];t.retrievedObjects={};var n=[];var r=e.length;for(var i=0;i<r;i++){var s=t.objectEncoder.encode(e[i]);t.retrievedObjects[s]=e[i];t.keys.push(s);n.push(s)}return n}e.Interactors.Interactor.call(this,["widget"]);this.retrievedObjects={};this.client=null;var t=this;this._subscribeEvents=function(){this._widget.onSearch=function(e){if(e&&e.length>2){t.onSearchStart();var n=t.buildSearchCriteria(e);t.client.retrieveItems(n,t)}};this._widget.onSelect=function(e){i(e)};this._widget.onChange=function(e){t.onInputChange(e)}};this.objectEncoder={encode:function(e){return e.id+", "+e.name}};this.selectedObject=function(){return r()};this.populate=function(e){return this.handleRetrievedItems(e)};this.handleRetrievedItems=function(e){var t=s(e);this._widget.populate(t);if(this.currentProgrammaticSearch)this.doSelectItemContaining(this.currentProgrammaticSearch);this.onWidgetPopulated()};this.onSearchStart=function(){};this.onWidgetPopulated=function(){};this.setSelection=function(e){if(!e.length)throw new Error("Selection must be an array");s(e);this._widget.setText(this.keys[0])};this.setText=function(e){this._widget.setText(e)};this.load=function(){};this.redraw=function(){};this.text=function(){return this._widget.text()};this.clear=function(){this._widget.clear()};this.disable=function(){this._widget.disable()};this.enable=function(){this._widget.enable()};this.doSelectText=function(e){this._widget.onSelect(e)};this.doSelectFirstSuggestion=function(){this.doSelectItemContaining(this.keys[0])};this.doSelectItemContaining=function(e){var t=this.keys.length;var n=null;for(var r=0;r<t;r++){if(this.keys[r].indexOf(e)>=0){n=this.keys[r];break}}if(n){this._widget.setText(n);this._widget.onSelect(n)}};this.doSearchTextSelectingFirstMatchingItem=function(e){this.currentProgrammaticSearch=e;this._widget.onSearch(e)};this.doSearchText=function(e){this._widget.onSearch(e)};this.buildSearchCriteria=function(t){return new e.Models.sOnDTO({name:t})};this.buildDtoWhenUserInputDoesntMatchAnyOfTheSuggestedItems=function(e){return n(e)};this.onSelectionChanged=function(e){};this.onChanged=function(e){};this.onInputChange=function(e){}}function s(){e.Interactors.Interactor.call(this,["dataBinder"]);var t=this;this._handleServerError=function(e){this._dataBinder.enable()};this._subscribeEvents=function(){this._dataBinder.onObjectChanged=function(e){t.selectionChanged.call(t,e);t.onSelectionChanged.call(t,e)}}}function o(){var e=this;this.initialize=function(){};this.setParams=function(e){this.ajaxFileUploader.setParams(e);this.params=e};this.extendParams=function(e){var t=this.params||{};for(var n in e){t[n]=e[n]}this.setParams(t)};this._onSubmit=function(t,n){e.extendParams({file:n});e.onSubmit(t,n)};this._onComplete=function(t,n,r){if(window.sOn.Utils.isEmptyObject(r))e.onCancel(t,n);else e.onComplete(t,n,r)};this._onCancel=function(t,n){e.onCancel(t,n)};this.onSubmit=function(e,t){};this.onComplete=function(e,t,n){};this.onCancel=function(e,t){};this.configure=function(e,t){e.onComplete=this._onComplete;e.onSubmit=this._onSubmit;e.onCancel=this._onCancel;if(!t){this.ajaxFileUploader=new qq.FileUploader(e)}else{this.ajaxFileUploader=new t(e)}}}n.prototype=new e.Network.Client;n.prototype.constructor=n;n.prototype.retrieveItems=function(e,t){this.requestData(this.urlPrefix+this.urlPath,{criteria:JSON.stringify(e)},function(n){t.handleRetrievedItems(n)})};r.prototype.constructor=r;r.prototype.retrieveItems=function(e,t){t.handleRetrievedItems(this.data)};i.prototype.avoidServerCalls=function(){var e={requestData:function(){},retrieveItems:function(){}};this.client=e};i.prototype.constructor=i;i.create=function(t){var r=new i;var s=new e.Widgets.AutocompleteTextBox(t.domId,t.placeholder);r.attachWidget(s);r.attachClient(new n);r.client.urlPath=t.urlPath;if(t.errorMessageWidget)r.attachErrorMessageWidget(t.errorMessageWidget);if(t.objectEncoder)r.objectEncoder=t.objectEncoder;return r};s._create=function(e){var t=new s;t.dtoType=e.dtoType;t.attachClient(new n);t.client.urlPath=e.urlPath;if(e.errorMessageWidget)t.attachErrorMessageWidget(e.errorMessageWidget);return t};s.create=function(t){var n=this._create(t);n.attachDataBinder(e.Factory.DropDownDataBinder(t.placeholder,t.selectableDomId));return n};s.createSimple=function(t){var n=this._create(t);var r=new e.DataBinders.SingleChoiceSelectable;var i=new e.Widgets.DropDown(t.selectableDomId,t.placeholder);r.attachWidget(i);if(t.defaultOptionText){i.defaultOptionText=t.defaultOptionText}n.attachDataBinder(r);return n};s.prototype={constructor:s,load:function(e){this.criteria=e;this._dataBinder.disableWhileWait();this.client.retrieveItems(e,this)},dataBinder:function(){return this._dataBinder},setLoggedUser:function(e){this.client.provider=e},selectionChanged:function(e){this.selectedItem=e},changeSelection:function(e){this._dataBinder.selectItem(e)},handleRetrievedItems:function(t){var n=this;var r=new e.Models.sOnCollection({models:t,dtoType:n.dtoType});this._dataBinder.enable();this._dataBinder.addCollection(r);this.onLoaded()},clear:function(){this._dataBinder.clear(true)},redraw:function(){this._dataBinder.redraw()},deselectAnyOption:function(){this._dataBinder.deselectAnyOption()},onSelectionChanged:function(){},onLoaded:function(){},avoidServerCalls:function(){this.client.retrieveItems=function(){}}};o.create=function(e,t){var n=new o;n.configure({element:document.getElementById(e.domId),action:e.url},t);return n};e.Components=e.Components||{};e.Components.FileUploader=o;e.Components.Dropdown=s;e.Components.Autocompletion=i;e.Components.ComponentDummyClient=r})(window.sOn);window.sOn=window.sOn||{};(function(e,t){function i(e){var t;t=new r.Message("errorMessage",r.Message.types.error,e);return t}function s(e,t){var n=e||"policyHolderId";return new r.TextBox(n,t)}function o(e,t){var n=e||"policyHolderId";return new r.AutocompleteTextBox(n,t)}function u(e,t,n){return new r.Checkbox(e,t,n)}function a(e){var t;t=new r.Message("successMessage",r.Message.types.success,e);return t}function f(e,t){var n;n=new r.Message(e,r.Message.types.success,t);return n}function l(t,n){var i="Aceptar";try{i=e.Culture.strings.widgets.button.accept}catch(s){}var o=n||"submitButton";return new r.Button(o,t,i,r.Button.types.accept)}function c(e,t){var i=new n.SingleChoiceSelectable;i.attachWidget(new r.AutocompletionDropDown(t,e));return i}function h(e){return c(e,"specialties")}function p(e){var t=new n.SingleChoiceSelectable;t.attachWidget(new r.AutocompletionDropDown("insurers",e));return t}function d(e){var t=new n.SingleChoiceSelectable;t.attachWidget(new r.AutocompletionDropDown("colaborators",e));return t}function v(e){var t=new n.SingleChoiceSelectable;t.attachWidget(new r.AutocompletionDropDown("actos",e));return t}function m(t,n){var r=new e.DataBinders.PairsTable;r.attachWidget(new e.Widgets.Table(t,n));return r}function g(t,n){var r=new e.DataBinders.ClickablePairsTable;r.attachWidget(new e.Widgets.Table(t,n));return r}function y(t,n,r,i){t.driver=new e.Printing.Driver;if(i)t.template=i;if(r)t.attachAllRenderers(r);return t}var n=e.DataBinders;var r=e.Widgets;e.Factory=e.Factory||{};e.Factory.DropDownDataBinder=c;e.Factory.SpecialtiesDataBinder=h;e.Factory.InsurersDataBinder=p;e.Factory.ActosDataBinder=v;e.Factory.ErrorMessageWidget=i;e.Factory.EqualmedMessageWidget=f;e.Factory.TextBoxWidget=s;e.Factory.AutocompleteTextBoxWidget=o;e.Factory.SuccessMessageWidget=a;e.Factory.AcceptButtonWidget=l;e.Factory.CheckboxWidget=u;e.Factory.PreparePrintingFormatter=y;e.Factory.ColaboratorsDataBinder=d;e.Factory.PairsDataBinder=m;e.Factory.ClickablePairsBinder=g})(window.sOn);window.sOn=window.sOn||{};(function(e,t){function n(){function r(t){try{if(t.initialize)t.initialize()}catch(n){if(!t)e.Logger.log("Initialization error: dependency number "+t+" has not been injected or is falsy");else{e.Logger.log("could not initialize widget:"+t.toString());try{console.log(t.constructor.toString().split("()")[0].split("function")[1]+" - problem:"+n.stack)}catch(r){}}}}function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e,n){var r="attach"+i(n);var s="_"+n;e[r]=function(r){t.registerInitializable(r);e[s]=r;e.get[n]=r}}var t=this;var n=[];this.initialize=function(){var e=n.length;for(var t=0;t<e;t++){r(n[t])}};this.registerInitializable=function(e){n.push(e)};this.publishWidgetsPorts=function(e,t){var n=t.length;e.get={};for(var r=0;r<n;r++)s(e,t[r])};this.attachWidget=function(e,t){var n=t.elementId;var o="attach"+i(n);s(e,n);e[o](t);r(t)}}function r(e){return e&&e.constructor&&e.constructor.toString().indexOf("Array")!=-1}function i(t,n){function s(e,t){for(var n in e){if(typeof e[n]=="function"&&n.indexOf(t)==0){e[n]()}}}function o(e){return e==403||e==-32750}if(!n)n=new e.Interactors.Container;if(!r(t))throw new Error("Widgets should be an array of strings, not this:"+t);n.publishWidgetsPorts(this,t);var i=false;this.executeAllMethods_startingWith_subscribeEvents=function(){s(this,"_subscribeEvents")};this.executeAllMethods_startingWith_preInitialize=function(){s(this,"_preInitialize")};this.executeAllMethods_startingWith_postInitialize=function(){s(this,"_postInitialize")};this.initialize=function(){if(!i){this.executeAllMethods_startingWith_preInitialize();n.initialize();this.executeAllMethods_startingWith_postInitialize();this.executeAllMethods_startingWith_subscribeEvents();i=true}};this.attachClient=function(e){var t=this;this.client=e;this.client.onError=function(e,n){if(o(n))t._handleSessionExpiration();else t._handleServerError(e,n)}},this._handleServerError=function(){};this._handleSessionExpiration=function(){e.Culture=e.Culture||{};e.Culture.strings=e.Culture.strings||{errors:{}};var t=e.Culture.strings.errors.sessionExpired||"La sesión ha caducado o no tiene permisos para ejecutar esta acción. Pruebe a iniciar sesión de nuevo.";try{if(this._errorMessage)this._errorMessage.show(t);else if(this._errorMessageWidget)this._errorMessageWidget.show(t);else alert(t)}catch(n){alert(t)}};this.addWidget=function(e){n.attachWidget(this,e)};if(!this.attachErrorMessageWidget)this.attachErrorMessageWidget=function(e){this._errorMessageWidget=e};this._preInitialize=function(){};this._postInitialize=function(){};this._subscribeEvents=function(){}}function s(){var e=this;var t=new n;t.publishWidgetsPorts(this,["buttonWidget"]);this.clicked=false;this.initialize=function(){t.initialize();this._subscribeEvents()};this._subscribeEvents=function(){this._buttonWidget.onClick=function(){e.clicked=true}}}function o(e){i.call(this,["buttonWidget"],e);this.initialized=false;this.clicked=false;var t=this;this._subscribeEvents=function(){this._buttonWidget.onClick=function(){t.clicked=true}};this._postInitialize=function(){this.initialized=true}}function u(e){i.call(this,[]);if(!e){this.baseInteractor=new o;for(var t in this.baseInteractor){this[t]=this.baseInteractor[t]}}this._postInitialize=function(){this.baseInteractor._postInitialize();this.someNewProperty=true}}function a(){o.call(this);this._postInitializeExtended=function(){this.someNewProperty=true}}e.Interactors=e.Interactors||{};e.Controllers=e.Controllers||{};e.Interactors.Interactor=i;e.Interactors.Container=n;e.Interactors.SampleInteractor=s;e.Interactors.ExtendedSample=o;e.Interactors.WrapperInheritanceSample=u;e.Interactors.ConstructorStealingInheritanceSample=a})(window.sOn)