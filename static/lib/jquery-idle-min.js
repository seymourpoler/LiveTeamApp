(function(a){a.idleTimer=function(b,c,d){d=a.extend({startImmediately:true,idle:false,enabled:true,timeout:3e4,events:"mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove"},d);c=c||document;var e=function(b){if(typeof b==="number"){b=undefined}var f=a.data(b||c,"idleTimerObj");f.idle=!f.idle;var g=+(new Date)-f.olddate;f.olddate=+(new Date);if(f.idle&&g<d.timeout){f.idle=false;clearTimeout(a.idleTimer.tId);if(d.enabled)a.idleTimer.tId=setTimeout(e,d.timeout);return}var h=jQuery.Event(a.data(c,"idleTimer",f.idle?"idle":"active")+".idleTimer");a(c).trigger(h)},f=function(b){var c=a.data(b,"idleTimerObj")||{};c.enabled=false;clearTimeout(c.tId);a(b).off(".idleTimer")},g=function(){var b=a.data(this,"idleTimerObj");clearTimeout(b.tId);if(b.enabled){if(b.idle){e(this)}b.tId=setTimeout(e,b.timeout)}};var h=a.data(c,"idleTimerObj")||{};h.olddate=h.olddate||+(new Date);if(typeof b==="number"){d.timeout=b}else if(b==="destroy"){f(c);return this}else if(b==="getElapsedTime"){return+(new Date)-h.olddate}a(c).on(a.trim((d.events+" ").split(" ").join(".idleTimer ")),g);h.idle=d.idle;h.enabled=d.enabled;h.timeout=d.timeout;if(d.startImmediately){h.tId=setTimeout(e,h.timeout)}a.data(c,"idleTimer","active");a.data(c,"idleTimerObj",h)};a.fn.idleTimer=function(b,c){if(!c){c={}}if(this[0]){a.idleTimer(b,this[0],c)}return this}})(jQuery)